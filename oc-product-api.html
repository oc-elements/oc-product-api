<link rel="import" href="../polymer/polymer-element.html">

<dom-module id="oc-product-api">
  <template>
    <iron-ajax id="createProduct"></iron-ajax>
    <iron-ajax id="getProducts"></iron-ajax>
    <iron-ajax id="getProduct"></iron-ajax>
    <iron-ajax id="updateProduct"></iron-ajax>
    <iron-ajax id="getProductExtraSets"></iron-ajax>
    <iron-ajax id="addProductExtraSet"></iron-ajax>
    <iron-ajax id="removeProductExtraSet"></iron-ajax>
    <iron-ajax id="getProductOptionSets"></iron-ajax>
    <iron-ajax id="addProductOptionSet"></iron-ajax>
    <iron-ajax id="removeProductOptionSet"></iron-ajax>
    <iron-ajax id="updateProductAttributes"></iron-ajax>
    <iron-ajax id="getProductTags"></iron-ajax>
    <iron-ajax id="updateProductTags"></iron-ajax>
    <iron-ajax id="getProductImages"></iron-ajax>
    <iron-ajax id="deleteProductImage"></iron-ajax>
    <iron-ajax id="setDefaultImage"></iron-ajax>
    <iron-ajax id="getProductByCriteria"></iron-ajax>
  </template>

  <script>
    /**
     * `oc-product-api`
     * Element for consuming the Ordercloud Product API
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */

    class OcProductApi extends Ordercloud.ApiMixin(Polymer.Element) {
      static get is() { return 'oc-product-api'; }
      static get properties() {
                static get properties() {return { };}
      }
    }

   
    /**
     * Create a new product for an Organisation
     * @param organisationId Number
     * @param product (see docs.ordercloud.com POST /product)
     * @return {Promise}
     */
    createProduct(organisationId, product) {
        this.$.createProduct.url = this._generateUrl('product/organisation/' + organisationId);
        this.$.createProduct.method = "POST";
        this.$.createProduct.contentType = "application/json";
        this.$.createProduct.body = product;
        return this._generateRequest(this.$.createProduct);
    },
    /**
     * Return all Products of an organisation
     * @return {Promise}
     */
    getProducts(page, pageSize) {
        this.$.getProducts.url = this._generateUrl('product?page=' + page + '&pagesize=' + pageSize);
        return this._generateRequest(this.$.getProducts);
    },
    /**
     * Return a Product of an organisation
     * @return {Promise}
     */
    getProduct(productId) {
        this.$.getProduct.url = this._generateUrl('/product/'+productId);
        return this._generateRequest(this.$.getProduct);
    },
    /**
     * Add a extra set to a product
     * @param productId Number
     * @param params (see docs.ordercloud.com POST /product)
     * @return {Promise}
     */
    updateProduct(productId, params) {
        this.$.updateProduct.url = this._generateUrl('product/'+productId);
        this.$.updateProduct.method = "PUT";
        this.$.updateProduct.body = params;
        this.$.updateProduct.contentType = "application/json";
        return this._generateRequest(this.$.updateProduct);
    },
    /**
     * Return all extras of a product
     * @param productId Number
     * @return {Promise}
     */
    getProductExtraSets(productId) {
        this.$.getProductExtras.url = this._generateUrl('product/'+productId+'/extras/set');
        return this._generateRequest(this.$.getProductExtras);
    },
    /**
     * Add a extra set to a product
     * @param productId Number
     * @param extraSetId Number
     * @return {Promise}
     */
    addProductExtraSet(productId, extraSetId) {
        this.$.addProductExtraSet.url = this._generateUrl('/product/'+productId+'/extras/set/'+extraSetId);
        this.$.addProductExtraSet.method = "PUT";
        this.$.addProductExtraSet.contentType = "application/json";
        return this._generateRequest(this.$.addProductExtraSet);
    },
    /**
     * Remove a extra set from product
     * @param productId Number
     * @param extraSetId Number
     * @return {Promise}
     */
    removeProductExtraSet(productId, extraSetId) {
        this.$.removeProductExtraSet.url = this._generateUrl('/product/'+productId+'/extras/set/'+extraSetId);
        this.$.removeProductExtraSet.method = "DELETE";
        this.$.removeProductExtraSet.contentType = "application/json";
        return this._generateRequest(this.$.removeProductExtraSet);
    },
    /**
     * Return all option sets of a product
     * @param productId Number
     * @return {Promise}
     */
    getProductOptionSets(productId) {
        this.$.getProductOptionSets.url = this._generateUrl('product/'+productId+'/options/set');
        return this._generateRequest(this.$.getProductOptionSets);
    },
    /**
     * Add a option set to a product
     * @param productId Number
     * @param optionSetId Number
     * @return {Promise}
     */
    addProductOptionSet(productId, optionSetId) {
        this.$.addProductOptionSet.url = this._generateUrl('/product/'+productId+'/options/set/'+optionSetId);
        this.$.addProductOptionSet.method = "PUT";
        this.$.addProductOptionSet.contentType = "application/json";
        return this._generateRequest(this.$.addProductOptionSet);
    },
    /**
     * Remove a option set from product
     * @param productId Number
     * @param optionSetId Number
     * @return {Promise}
     */
    removeProductOptionSet(productId, optionSetId) {
        this.$.removeProductOptionSet.url = this._generateUrl('/product/'+productId+'/options/set/'+optionSetId);
        this.$.removeProductOptionSet.method = "DELETE";
        this.$.removeProductOptionSet.contentType = "application/json";
        return this._generateRequest(this.$.removeProductOptionSet);
    },
    /**
     * Update product attribute
     * @param productId Number
     * @param params [{ name: String. value: String }] Array
     * @return {Promise}
     */
    updateProductAttributes(productId, params) {
        this.$.updateProductAttributes.url = this._generateUrl('/product/'+productId+'/attribute');
        this.$.updateProductAttributes.method = "PUT";
        this.$.updateProductAttributes.body = params;
        this.$.updateProductAttributes.contentType = "application/json";
        return this._generateRequest(this.$.updateProductAttributes);
    },
    /**
     * Update product attribute
     * @param productId Number
     * @param params [{ name: String. value: String }] Array
     * @return {Promise}
     */
    updateProductTags(productId, params) {
        this.$.updateProductTags.url = this._generateUrl('/product/'+productId+'/tags');
        this.$.updateProductTags.method = "PUT";
        this.$.updateProductTags.body = params;
        this.$.updateProductTags.contentType = "application/json";
        return this._generateRequest(this.$.updateProductTags);
    },
    /**
     * Return all images for a product
     * @param productId Number
     * @return {Promise}
     */
    getProductImages(productId) {
        this.$.getProductImages.url = this._generateUrl('product/'+productId+'/images');
        return this._generateRequest(this.$.getProductImages);
    },
    /**
     * Delete product image
     * @param productId Number
     * @param imageName path
     * @return {Promise}
     */
    deleteProductImage(productId, imageName) {
        this.$.deleteProductImage.url = this._generateUrl('/product/'+productId+'/image/'+imageName);
        this.$.deleteProductImage.method = "DELETE";
        return this._generateRequest(this.$.deleteProductImage);
    },
    /**
     * Set Image as default
     * @param productId Number
     * @param imageName path
     * @return {Promise}
     */
    setDefaultImage(productId, imageName) {
        this.$.setDefaultImage.url = this._generateUrl('product/'+productId+'/image/'+imageName+'/default');
        this.$.setDefaultImage.method = "PUT";
        this.$.setDefaultImage.contentType = "application/json";
        return this._generateRequest(this.$.setDefaultImage);
    },
    /**
     * returns all the Products for Criteria
     *
     * @param criteria (see docs.ordercloud.com POST /product/criteria)
     * @return {Promise}
     */
    getProductByCriteria(criteria) {
        this.$.getProductByCriteria.url = this._generateUrl('product/criteria');
        this.$.getProductByCriteria.method = "PUT";
        this.$.getProductByCriteria.body = criteria;
        this.$.getProductByCriteria.contentType = "application/json";
        return this._generateRequest(this.$.getProductByCriteria);
    },
    window.customElements.define(OcProductApi.is, OcProductApi);
  </script>
</dom-module>
